library(wr.data.table)
?fars_read
?read.csv
?dplyr::tbl_df
dplyr::tbl_df(mtcars)
dplyr::as_tibble(mtcars)
?read.csv
class(dply::tbl_df(data()))
class(dplyr::tbl_df(data(mtcars)))
Sys.which(Sys.getenv("R_QPDF", "qpdf"))
library(tools)
Sys.getenv("PATH")
library(wr.data.table)
?read.csv
?fars_read
?sprintf
sprintf("file", date("2012-01-26"))
sprintf("file", date())
data()
date
date()
sprintf("file", date
())
sprintf("file%d", date())
sprintf("file%s", date())
sprintf("%s %d", "test", 1:3)
sprintf("file%d", 2011:2019)
readr::read_csv(c("a.csv", "b.csv"))
readr::read_csv(c("a.csv", "b.csv"))
r <- readr::read_csv(c("a.csv", "b.csv"))
r
library(wr.data.table)
library(wr.data.table)
library(wr.data.table)
?fars_read
library(wr.data.table)
?make_filename
library(wr.data.table)
?make_filename
library(wr.data.table)
library(wr.data.table)
?fars_read_years
read.csv(C:/Users/Ka Lok/Downloads/_e1adac2a5f05192dc8780f3944feec13_fars_data.zip/data)
df <-read.csv("C:/Users/Ka Lok/Downloads/_e1adac2a5f05192dc8780f3944feec13_fars_data.zip/data")
df <-read.csv("C:/Users/Ka Lok/Downloads/_e1adac2a5f05192dc8780f3944feec13_fars_data.zip/data/accident_2013.csv.bz2")
df <-read.csv("C:/Users/Ka Lok/Downloads/_e1adac2a5f05192dc8780f3944feec13_fars_data/data/accident_2013.csv.bz2")
df
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
library(wr.data.table)
library(devtools)
library(devtools)
document()
roxygen2::roxygenise()
use_gpl3_license()
data3
system.file("data", package = "wr.data.table")
load(paste0(system.file("data", package = "wr.data.table"),"sysdata.rda")
)
load(paste0(system.file("data", package = "wr.data.table"),"/sysdata.rda")
)
load(paste0(system.file("data", package = "wr.data.table"),"/sysdata.rda"))
use_data(mtcars)
library(wr.data.table)
data1
data2
data3
mtcars
library(wr.data.table)
wr.assignCols(data.table(mtcars),mpg=mtcars$hp)
library(wr.data.table)
wr.assignCols(data.table(mtcars),mpg=mtcars$hp)
git remote
library(testthat)
test_check('wr.data.table')
devtools::uses_testthat()
devtools::uses_testthat
devtools::uses_testthat()
devtools::use_testthat()
devtools::use_test
library(devtools)
use_testthat()
use_test()
use_testthat()
use_test()
use_test()
use_test()
test_check()
test_check('wr.data.table')
library(wr.data.table)
roxygen2::roxygenise()
document()
test_that("data.table is created with row names", {
expect_that(wr_dt_withrownames(mtcars), is_a("data.table"))
expect_identical(wr_dt_withrownames(mt.cars),
data.table(rownames(mtcars),mtcars))
})
test_that("data.table is created with row names", {
expect_that(wr_dt_withrownames(mtcars), is_a("data.table"))
expect_identical(wr_dt_withrownames(mtcars),
data.table(rownames(mtcars),mtcars))
})
data.table(rownames(mtcars), mtcars)
wr_dt_withrownames(mtcars)
test_that("data.table is created with row names", {
expect_that(wr_dt_withrownames(mtcars), is_a("data.table"))
expect_equal(wr_dt_withrownames(mtcars),
data.table(rownames(mtcars),mtcars))
})
test_that("data.table is created with row names", {
expect_that(wr_dt_withrownames(mtcars), is_a("data.table"))
expect_equal(wr_dt_withrownames(mtcars),
data.table(rownames(mtcars),mtcars))
})
library(wr.data.table)
mtcars
library(wr.data.table)
attributes(mtcars)
attributes(mtcars)$row.names <- NULL
mtcars
mtcars
df <- data.frame(mtcars)
df
rownames(df) <- NULL
df
library(wr.data.table)
wr_dt_withrownames(df)
wr_dt_withrownames(data.table(mtcars))
dt <- data.table(mtcars)
dt
library(data.table)
dt <- data.table(mtcars)
dt
attr(mtcars)
?attr
attr(dt, "rownames") <- rownames(mtcars)
dt
df
dt
attributes(dt)
dt <- data.table(mtcars)
dt
wr.assigncols(dt, kmpl=mpg/2.35215)
dt
dt <- wr.assigncols(dt, kmpl=mpg/2.35215)
dt
dt
dt <- wr.assigncols(dt, kmpl=mpg/2.35215, cyl2 = cyl*2)
dt
dt
wr.assigncols(dt, kmpl = mpg / 2.35215, wt_in_kg = wt / 2.20462)
dt
wr.assigncols(dt, am = NULL)
dt
library(wr.data.table)
?wr.filter
?wr.filter
?wr_dt_withrownames
?wr.assigncols
library(wr.data.table)
library(data.table)
dt <- data.table(mtcars)
library(wr.data.table)
library(wr.data.table)
library(data.table)
dt <- data.table(mtcars)
dt
wr_select(dt, vs, am, mpg:hp)
wr_select(dt*2, vs, am, mpg:hp)
wr_select(dt*2, vs, am-2, mpg:hp)
wr_select(dt*2, vs*100, am-2, mpg:hp)
wr_select(dt*2, vs*100000, am-2, mpg:hp)
wr_select(dt*2, vs*100000, am-2, mpg+1:hp-3)
wr_select(dt*2, vs*100000, am-2, mpg:hp)
dt
dt |> wr_order(vs, am)
dt
dt1 <- dt |> wr_order(cyl, am)
dt1
dt1
library(wr.data.table)
dt <- data.table(mtcars)
dt
dt2 <- dt |> wr_filter(mpg > 19, gear == 5)
dt2 <- dt |> wr_filter(mpg > 19, gear = 5)
dt2 <- dt |> wr_filter(mpg > 19, vs == 1)
dt2 <- dt |> wr_filter(mpg > 19)
dt2
dt
dt2 <- dt |> wr_filter(mpg > 19 & gear == 5)
dt2
dt
library(wr.data.table)
dt <- dtmtcar()
dt <- dtmtcars()
dtmtcars()
wr.data.table::dtmtcars
wr.data.table::dtmtcars()
library(wr.data.table)
dt <- dtmtcars()
dt
dt[,!(mpg:hp)]
dt[,"mpg:hp"]
dt[,!mpg:hp]
dt[,mpg:hp]
library(wr.data.table)
library(wr.data.table)
dt <- dtmtcars()
library(wr.data.table)
library(wr.data.table)
library(wr.data.table)
dt <- dt()
dt
dt |> wr_select(mpg:hp)
dt |> wr_select(mpg:hp, vs, am)
dt |> wr_select(!mpg:hp, vs, am)
dt |> wr_select(!mpg:hp)
dt |> wr_select(!"mpg:hp")
dt |> wr_select(!mpg:hp)
dt[,!mpg:hp]
dt[,!"mpg:hp"]
dt[,!mpg:hp]
dt[,!(mpg:hp)]
library(wr.data.table)
library(wr.data.table)
dt <- dt()
dt | wr.select(mpg)
dt |> wr_select(mpg)
dt |> wr_select(mpg:ho)
dt |> wr_select(mpg:hp)
dt
dt |> wr_select(mpg:hp)
library(wr.data.table)
dt <- dt()
dt |> wr_select(mpg:hp)
library(wr.data.table)
dt <- dt()
dt |> wr_select(mpg:hp)
dt |> wr_select(mpg:hp, am)
dt |> wr_select(am, mpg:hp, am)
?warningCondition
length(dt)
dt
#' Function to subset data.table with selected columns/variables
#'
#' @import data.table
#'
#' @export
wr_select <- function(dt, ...) {
expr <- match.call()
stopifnot("dt must be data.table" = any(class(dt) == "data.table"))
expr <- as.list(expr[-1:-2])
# isRange
isRange <- NULL
isRange <- lapply(expr, function(x) {grepl(":", deparse(x))}) |> unlist()
dt_range <- data.table()
if (length(expr[isRange]) >= 1) {
rangeExprAsStrings <- (lapply(expr[isRange], function(x) { deparse(x) }) |> unlist())
for (s in rangeExprAsStrings) {
callAsString <- paste0("copy(dt)[,",s,"]")
dt_range <- cbind(dt_range,eval(parse(text=callAsString)))
}
}
# !is_Range
dt_separate <- data.table()
if (length(expr[!isRange]) >= 1) {
constructCall <- as.call(c(
as.name("list"),
c(expr[!isRange])
))
dt_separate <- copy(dt)[,eval(constructCall)]
}
dt_result <- cbind(dt_range, dt_separate)
if (colnames(dt_result) < length(dt_result)) {
warning("Non-unique column/variable names in returned data.table")
}
dt_result
}
library(wr.data.table)
dt <- dt()
dt |> wr_select(mpg:hp, mpg, hp)
dt <- dt()
dt
dt |> wr_select(mpg:hp, mpg, hp)
trace()
library(wr.data.table)
dt |> wr_select(mpg:hp, mpg, hp)
library(wr.data.table)
dt |> wr_select(mpg:hp, mpg, hp)
warning('testing')
library(wr.data.table)
dt |> wr_select(mpg:hp, mpg, hp)
trace()
library(wr.data.table)
library(wr.data.table)
dt <- dt()
wr_select(dt, mpg)
wr_select(dt, mpg:hp)
library(wr.data.table)
library(wr.data.table)
dt <- mkdt()
dt |> wr_select(mpg:hp)
library(wr.data.table)
library(wr.data.table)
dt <- mkdt()
dt |> wr_select(mpg:hp, mpg)
library(wr.data.table)
dt |> wr_select(mpg:hp, am)
library(wr.data.table)
dt <- mkdt()
dt |> wr_select(mpg:hp, am)
library(wr.data.table)
dt <- mkdt()
dt |> wr_select(mpg:hp, am)
library(wr.data.table)
dt <- mkdt()
dt |> wr_select(mpg:hp, am)
dt
dt |> select(mp:cyl, drat:qsec)
dt |> wr_select(mp:cyl, drat:qsec)
dt |> wr_select(mpg:cyl, drat:qsec)
dt |> wr_select(mpg:cyl, vs)
dt |> wr_select(mpg:cyl, vs)
library(wr.data.table)
dt <- mkdt()
dt |> wr_select(mpg:hp)
mtcars
dt |> wr_select(mpg:hp, vs:carb)
dt[,!"mpg"]
dt[,!(mpg)]
dt[,!(mpg:hp)]
dt[,!mpg]
dt[,!.(mpg)]
dt[,!(mpg)]
dt[,!(mpg,vs)]
dt[,!list(mpg,vs)]
dt[,!list("mpg","vs")]
dt[,!.("mpg","vs")]
dt[,!"mpg","vs")]
dt[,!"mpg"]
dt[,!c("mpg","vs")]
dt
dt[,-c("mpg","vs")]
dt[,list(T,T,F,F,F,T,T,F,F,F)]
dt[,c(T,T,F,F,F,T,T,F,F,F)]
dt[,.(mpg, hp)]
dt[,!.(mpg, hp)]
dt[,.(mpg, hp)]
dt[,!("mpg")]
library(wr.data.table)
dt <- dt()
dt <- mkdt()
dt |> wr_deselect(mpg)
dt
library(wr.data.table)
dt |> wr_deselect(mpg)
grepl(":", "mpg:hp")
dt[,!(mpg)]
dt[,!("mpg")]
dt[,!(mpg:hp)]
library(wr.data.table)
dt |> mkdt()
dt <- mkdt()
dt |> wr_deselect(mpg:hp)
dt |> wr_deselect(mpg)
dt |> wr_deselect(mpg, hp)
dt |> wr_deselect(mpg, hp, vs:am)
dt |> wr_deselect(wt:qsec, mpg, hp, vs:am)
dt |> wr_deselect(wt:qsec, mpg, hp, vs:am, mpg)
dt <- dt |> wr_deselect(wt:qsec, mpg, hp, vs:am, mpg)
dt
dt <- dt |> wr_deselect(wt:qsec, mpg, mpg, hp, vs:am)
dt
dt <- mkdt()
dt <- dt |> wr_deselect(wt:qsec, mpg, mpg, hp, vs:am)
dt
library(wr.data.table)
dt |> mkdt()
dt <- mkdt()
dt |> group_by(am, vs)
library(wr.data.table)
dt <- mkdt()
dt |> wr_groupby(am, vs)
library(wr.data.table)
library(wr.data.table)
library(wr.data.table)
library(wr.data.table)
dt <- mkdt()
dt |> wr_groupby(am, vs)
dt
dt <- dt |> wr_groupby(am, vs)
atrributes(dt)
attrributes(dt)
attributes(dt)
dt[, .I, by=c(am)]
dt[, .I, by=am]
dt[,mu=mean(mpg), by=.(mpg:carb)]
dt[,mu=mean(mpg), by=mpg:carb]
dt[,mu:=mean(mpg), by=mpg:carb]
dt[,mu:=mean(mpg), by=c(mpg:carb)]
dt[,mu:=mean(mpg)]
dt
dt[,mu:=mean(mpg)]
dt
dt[,mu:=mean(mpg),by=am]
dt
dt[,mu:=mean(mpg),by=am]
dt[,.(mu=mean(mpg)),by=am]
dt[,.(mu=mean(mpg)),by=c(am,vs)]
dt
dt[,.(mu=mean(mpg)),by=c(am,vs)]
dt[,.(mu=mean(mpg)),by=list(am,vs)]
dt[,.(mu=mean(mpg)),by=.(am,vs)]
dt[,.(mu=mean(mpg))]
library(wr.data.table)
dt <- mkdt()
dt |> wr.summarise(mu=mean(mpg))
dt |> wr.summarise(mumpg=mean(mpg),muhp=mean(ph))
dt |> wr.summarise(mumpg=mean(mpg),muhp=mean(hp))
mtcars |> dplyr::select(!mpg)
library(wr.data.table)
?wr_select
?wr_select
library(wr.data.table)
library(wr.data.table)
?wr_select
library(wr.data.table)
?wr_select
library(wr.data.table)
data1
mkdt()
library(wr.data.table)
attributes(dt)
dt <- mkdt()
library(wr.data.table)
library(wr.data.table)
dt <- mkdt()
attributes(dt)$group
dt1 <- dt |> wr_groupby(am, vs)
attributes(dt)$groups
attributes(dt)$group
attributes(dt)
attributes(dt1)
attributes(dt1)$group
attributes(dt)$group
dt |> wr_summarise(am, vs)
dt |> wr_summarise(am)
library(wr.data.table)
dt |> wr_summarise(am)
dt |> wr_summarise(mu_mpg=mean(mpg), sig_mpg=sd(mpg))
library(wr.data.table)
dt <- mkdt()
?environment
is.environment(dt)
is.environment(mtcsars)
is.environment(mtcars)
globalenv()
parent.env()
parent.env(globalenv())
eval(quote(dt <- data.table(mtcars)), enclos=parent.frame())
library(wr.data.table)
mkdr()
mkdt()
?eval
library(wr.data.table)
#' Function for turning mtcars data.frame into data.table
#'
#' @description for convenience during debugging
#'
#' @return data1 (which is exactly the same as mtcars) as \code{data.table}
#'
#' @import data.table
#'
#' @export
mkdt <- function(){
#data.table(data1)
eval(quote(dt <- data.table(mtcars)), envir=parent.frame())
}
mkdt()
library(wr.data.table)
mkdt()
library(wr.data.table)
mkdt()
library(wr.data.table)
library(wr.data.table)
mkdt()
mkdt()
dt |> wr_summarise(am)
dt |> wr_summarise(mean=mean(am))
dt |> wr_groupby(am) |> wr_summarise(mean=mean(am))
if (is.null(group)) {
callAsString <- paste0("dt[,.(",
paste(
paste(colNames, argsAsString,sep='='),
collapse=','),
")]")
print(head(dt))
eval(parse(text=callAsString))
} else {
print(attributes(dt))
}
library(wr.data.table)
dt |> wr_groupby(am) |> wr_summarise(mean=mean(am))
library(wr.data.table)
library(devtools)
document()
roxygen2::roxygenise()
document()
roxygen2::roxygenise()
