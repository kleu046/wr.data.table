February 2, 2020 - A man in the Philippines dies from the coronavirus -- the first time a death has been reported outside mainland China since the outbreak began.<br />
February 3, 2020 - China\'s Foreign Ministry accuses the US government of inappropriately reacting to the outbreak and spreading fear by enforcing travel restrictions.<br />
February 4, 2020 - The Japanese Health Ministry announces that ten people aboard the Diamond Princess cruise ship moored in Yokohama Bay are confirmed to have the coronavirus.<br /> The ship, which is carrying more than 3,700 people, is placed under quarantine scheduled to end on February 19.<br />
February 6, 2020 - First Covid-19 death in the United States: A person in California\'s Santa Clara County dies of coronavirus, but the link is not confirmed until April 21.<br />
February 7, 2020 - Li Wenliang, a Wuhan doctor who was targeted by police for trying to sound the alarm on a \"SARS-like\" virus in December, dies of the coronavirus.<br /> Following news of Li\'s death, the topics \"Wuhan government owes Dr.<br /> Li Wenliang an apology,\" and \"We want freedom of speech,\" trend on China\'s Twitter-like platform, Weibo, before disappearing from the heavily censored platform.<br />
February 8, 2020 - The US Embassy in Beijing confirms that a 60-year-old US national died in Wuhan on February 6, marking the first confirmed death of a foreigner.<br />
February 10, 2020 - Xi inspects efforts to contain the coronavirus in Beijing, the first time he has appeared on the front lines of the fight against the outbreak.<br /> On the same day, a team of international experts from WHO arrive in China to assist with containing the coronavirus outbreak.<br />
February 10, 2020 - The Anthem of the Seas, a Royal Caribbean cruise ship, sets sail from Bayonne, New Jersey, after a coronavirus scare had kept it docked and its passengers waiting for days.<br />
February 11, 2020 - WHO names the coronavirus Covid-19.<br />
February 13, 2020 - China\'s state-run Xinhua News Agency announces that Shanghai mayor Ying Yong will be replacing Jiang Chaoliang amid the outbreak.<br /> Wuhan Communist Party chief Ma Guoqiang has also been replaced by Wang Zhonglin, party chief of Jinan city in Shandong province, according to Xinhua.<br />
February 14, 2020 - A Chinese tourist who tested positive for the virus dies in France, becoming the first person to die in the outbreak in Europe.<br /> On the same day, Egypt announces its first case of coronavirus, marking the first case in Africa.<br />
February 15, 2020 - The official Communist Party journal Qiushi publishes the transcript of a speech made on February 3 by Xi in which he \"issued requirements for the prevention and control of the new coronavirus\" on January 7, revealing Xi knew about and was directing the response to the virus on almost two weeks before he commented on it publicly.<br />
February 17, 2020 - A second person in California\'s Santa Clara County dies of coronavirus, but the link is not confirmed until April 21.<br />
February 18, 2020 - Xi says in a phone call with British Prime Minister Boris Johnson that China\'s measures to prevent and control the epidemic \"are achieving visible progress,\" according to state news Xinhua.<br />
February 21, 2020 - The CDC changes criteria for counting confirmed cases of novel coronavirus in the United States and begins tracking two separate and distinct groups: those repatriated by the US Department of State and those identified by the US public health network.<br />
February 25, 2020 - The NIH announces that a clinical trial to evaluate the safety and effectiveness of the antiviral drug remdesivir in adults diagnosed with coronavirus has started at the University of Nebraska Medical Center in Omaha.<br /> The first participant is an American who was evacuated from the Diamond Princess cruise ship docked in Japan.<br />
February 25, 2020 - In an effort to contain the largest outbreak in Europe, Italy\'s Lombardy region press office issues a list of towns and villages that are in complete lockdown.<br /> Around 100,000 people are affected by the travel restrictions.<br />
February 26, 2020 - CDC officials say that a California patient being treated for novel coronavirus is the first US case of unknown origin.<br /> The patient, who didn\'t have any relevant travel history nor exposure to another known patient, is the first possible US case of \"community spread.<br />\"
February 26, 2020 - Trump places Vice President Mike Pence in charge of the US government response to the novel coronavirus, amid growing criticism of the White House\'s handling of the outbreak.<br />
February 29, 2020 - A patient dies of coronavirus in Washington state.<br /> For almost two months, this is considered the first death due to the virus in the United States, until autopsy results announced April 21 reveal two earlier deaths in California.<br />
March 3, 2020 - The Federal Reserve slashes interest rates by half a percentage point in an attempt to give the US economy a jolt in the face of concerns about the coronavirus outbreak.<br /> It is the first unscheduled, emergency rate cut since 2008, and it also marks the biggest one-time cut since then.<br />
March 3, 2020 - Officials announce that Iran will temporarily release 54,000 people from prisons and deploy hundreds of thousands of health workers as officials announced a slew of measures to contain the world\'s deadliest coronavirus outbreak outside China.<br /> It is also announced that 23 members of Iran\'s parliament tested positive for the virus.<br />
March 4, 2020 - The CDC formally removes earlier restrictions that limited coronavirus testing of the general public to people in the hospital, unless they had close contact with confirmed coronavirus cases.<br /> According to the CDC, clinicians should now \"use their judgment to determine if a patient has signs and symptoms compatible with COVID-19 and whether the patient should be tested.<br />\"
March 8, 2020 - Italian Prime Minister Giuseppe Conte signs a decree placing travel restrictions on the entire Lombardy region and 14 other provinces, restricting the movements of more than 10 million people in the northern part of the country.<br />
March 9, 2020 - Conte announces that the whole country of Italy is on lockdown.<br />
March 11, 2020 - WHO declares the novel coronavirus outbreak to be a pandemic.<br /> WHO says the outbreak is the first pandemic caused by a coronavirus.<br /> In an Oval Office address, Trump announces that he is restricting travel from Europe to the United States for 30 days in an attempt to slow the spread of coronavirus.<br /> The ban, which applies to the 26 countries in the Schengen Area, applies only to foreign nationals and not American citizens and permanent residents who\'d be screened before entering the country.<br />
March 13, 2020 - Trump declares a national emergency to free up $50 billion in federal resources to combat coronavirus.<br />
March 18, 2020 - Trump signs into law a coronavirus relief package that includes provisions for free testing for Covid-19 and paid emergency leave.<br />
March 19, 2020 - At a news conference, officials from China\'s National Health Commission report no new locally transmitted coronavirus cases for the first time since the pandemic began.<br />
March 23, 2020 - United Nations Secretary-General António Guterres calls for an immediate global ceasefire amid the pandemic to fight \"the common enemy.<br />\"
March 24, 2020 - Japan\'s Prime Minister Shinzo Abe and International Olympic Committee (IOC) president Thomas Bach agree to postpone the Olympics until 2021 amid the outbreak.<br />
March 25, 2020 - The White House and Senate leaders reach an agreement on a $2 trillion stimulus deal to offset the economic damage of coronavirus, producing one of the most expensive and far-reaching measures in the history of Congress.<br />
March 27, 2020 - Trump signs the stimulus package into law.<br />
April 2, 2020 - According to the Department of Labor, 6.<br />6 million US workers file for their first week of unemployment benefits in the week ending March 28, the highest number of initial claims in history.<br /> Globally, the total number of coronavirus cases surpasses 1 million, according to Johns Hopkins University\'s tally.<br />
April 3, 2020 - Trump says his administration is now recommending Americans wear \"non-medical cloth\" face coverings, a reversal of previous guidance that suggested masks were unnecessary for people who weren\'t sick.<br />
April 8, 2020 - China reopens Wuhan after a 76-day lockdown.<br />
April 14, 2020 - Trump announces he is halting funding to WHO while a review is conducted, saying the review will cover WHO\'s \"role in severely mismanaging and covering up the spread of coronavirus.<br />\"
April 20, 2020 - Chilean health officials announce that Chile will begin issuing the world\'s first digital immunity cards to people who have recovered from coronavirus, saying the cards will help identify individuals who no longer pose a health risk to others.<br />
April 21, 2020 - California\'s Santa Clara County announces autopsy results that show two Californians died of novel coronavirus in early and mid-February -- up to three weeks before the previously known first US death from the virus.<br />
April 28, 2020 - The US passes one million confirmed cases of the virus, according to Johns Hopkins.<br />
May 1, 2020 - The US Food and Drug Administration issues an emergency-use authorization for remdesivir in hospitalized patients with severe Covid-19.<br /> FDA Commissioner Stephen Hahn says remdesivir is the first authorized therapy drug for Covid-19.<br />
May 4, 2020 - During a virtual pledging conference co-hosted by the European Union, world leaders pledge a total of $8 billion for the development and deployment of diagnostics, treatments and vaccines against the novel coronavirus.<br />
May 11, 2020 - Trump and his administration announce that the federal government is sending $11 billion to states to expand coronavirus testing capabilities.<br /> The relief package signed on April 24 includes $25 billion for testing, with $11 billion for states, localities, territories and tribes.<br />
May 13, 2020 - Dr.<br /> Mike Ryan, executive director of WHO\'s health emergencies program, warns that the coronavirus may never go away and may just join the mix of viruses that kill people around the world every year.<br />
May 19, 2020 - WHO agrees to hold an inquiry into the global response to the coronavirus pandemic.<br /> WHO member states adopt the proposal with no objections during the World Health Assembly meeting, after the European Union and Australia led calls for an investigation.<br />
May 23, 2020 - China reports no new symptomatic coronavirus cases, the first time since the beginning of the outbreak in December.<br />
May 27, 2020 - Data collected by Johns Hopkins University reports that the coronavirus has killed more than 100,000 people across the US, meaning that an average of almost 900 Americans died each day since the first known coronavirus-related death was reported nearly four months earlier.<br />
June 2, 2020 - Wuhan\'s Health Commission announces that it has completed coronavirus tests on 9.<br />9 million of its residents with no new confirmed cases found.<br />
June 8, 2020 - New Zealand Prime Minister Jacinda Ardern announces that almost all coronavirus restrictions in New Zealand will be lifted after the country reported no active cases.<br />
June 11, 2020 - The US passes 2 million confirmed cases of the virus, according to Johns Hopkins.<br />
June 16, 2020 - University of Oxford scientists leading the Recovery Trial, a large UK-based trial investigating potential Covid-19 treatments, announce that a low-dose regimen of dexamethasone for 10 days was found to reduce the risk of death by a third among hospitalized patients requiring ventilation in the trial.<br />
June 20, 2020 - The NIH announces that it has halted a clinical trial evaluating the safety and effectiveness of drug hydroxychloroquine as a treatment for the coronavirus.<br /> \"A data and safety monitoring board met late Friday and determined that while there was no harm, the study drug was very unlikely to be beneficial to hospitalized patients with Covid-19,\" the NIH says in a statement.<br />
June 26, 2020 - During a virtual media briefing, WHO announces that it plans to deliver about 2 billion doses of a coronavirus vaccine to people across the globe.<br /> One billion of those doses will be purchased for low- and middle-income countries, according to WHO.<br />
July 1, 2020 - The European Union announces it will allow travelers from 14 countries outside the bloc to visit EU countries, months after it shut its external borders in response to the pandemic.<br /> The list does not include the US, which doesn\'t meet the criteria set by the EU for it to be considered a \"safe country.<br />\"
July 6, 2020 - In an open letter published in the journal Clinical Infectious Diseases, 239 scientists from around the world urge WHO and other health agencies to be more forthright in explaining the potential airborne transmission of coronavirus.<br /> In the letter, scientists write that studies \"have demonstrated beyond any reasonable doubt that viruses are released during exhalation, talking, and coughing in microdroplets small enough to remain aloft in air and pose a risk of exposure at distances beyond 1 to 2 meters (yards) from an infected individual.<br />\"
July 7, 2020 - The Trump administration notifies Congress and the UN that the US is formally withdrawing from WHO.<br /> The withdrawal goes into effect on July 6, 2021.<br />
July 7, 2020 - Brazil\'s president Jair Bolsonaro announces he has tested positive for Covid-19, following months of downplaying the virus.<br />
July 21, 2020 - European leaders agree to create a €750 billion ($858 billion) recovery fund to rebuild EU economies ravaged by the coronavirus.<br />
July 27, 2020 - A vaccine being developed by the Vaccine Research Center at the National Institutes of Health\'s National Institute of Allergy and Infectious Diseases, in partnership with the biotechnology company Moderna, enters Phase 3 testing.<br /> The trial is expected to enroll about 30,000 adult volunteers and evaluates the safety of the vaccine and whether it can prevent symptomatic Covid-19 after two doses, among other outcomes.<br />
August 11, 2020 - In a live teleconference, Russian President Vladimir Putin announces that Russia has approved a coronavirus vaccine for public use before completion of Phase 3 trials, which usually precedes approval.<br /> The vaccine, which is named Sputnik-V, is developed by the Moscow-based Gamaleya Institute with funding from the Russian Direct Investment Fund (RDIF).<br />
August 15, 2020 - Russia begins production on Sputnik-V, according to Russian state news agency TASS.<br />
August 23, 2020 - The FDA issues an emergency use authorization for the use of convalescent plasma to treat Covid-19.<br /> It is made using the blood of people who have recovered from coronavirus infections.<br />
August 27, 2020 - The CDC notifies public health officials around the US to prepare to distribute a potential coronavirus vaccine as soon as late October.<br /> In the documents, posted by The New York Times, the CDC provides planning scenarios to help states prepare and advises on who should get vaccinated first -- healthcare professionals, essential workers, national security \"populations\" and long-term care facility residents and staff.<br />
September 4, 2020 - The first peer-reviewed results of Phase 1 and Phase 2 clinical trials of Russia\'s Covid-19 vaccine are published in the medical journal The Lancet.<br /> The results \"have a good safety profile\" and the vaccine induced antibody responses in all participants, The Lancet says.<br />
October 2, 2020 - Trump announces that he and first lady Melania Trump have tested positive for Covid-19.<br /> He spends three nights at Walter Reed National Military Medical Center receiving treatment before returning to the White House.<br />
October 12, 2020 - Drugmaker Johnson & Johnson announces it has paused the advanced clinical trial of its experimental coronavirus vaccine because of an unexplained illness in one of the volunteers.<br />\"Following our guidelines, the participant\'s illness is being reviewed and evaluated by the ENSEMBLE independent Data Safety Monitoring Board (DSMB) as well as our internal clinical and safety physicians,\" the company said in a statement.<br /> ENSEMBLE is the name of the study.<br /> The trial resumes later in the month.<br />
December 10, 2020 - Vaccine advisers to the FDA vote to recommend the agency grant emergency use authorization to Pfizer and BioNTech\'s coronavirus vaccine.<br />
December 14, 2020 - US officials announce the first doses of the FDA authorized Pfizer vaccine have been delivered to all 50 states, the District of Columbia and Puerto Rico.<br />
December 18, 2020 - The FDA authorizes a second coronavirus vaccine made by Moderna for emergency use.<br /> \"The emergency use authorization allows the vaccine to be distributed in the U.<br />S.<br /> for use in individuals 18 years and older,\" the FDA said in a tweet.<br />
January 14, 2021 - The WHO team tasked with investigating the origins of the outbreak in Wuhan arrive in China.<br />
January 20 - 2021 - Newly elected US President Joe Biden halts the United States\' withdrawal from WHO.<br />
February 22, 2021 - The death toll from Covid-19 exceeds 500,000 in the United States.<br />
February 27, 2021 - The FDA grants emergency use authorization to Johnson & Johnson\'s Covid-19 vaccine, the first single dose Covid-19 vaccine available in the US.<br />
March 30, 2021 - According to a 120-page report from WHO, the novel coronavirus that causes Covid-19 probably spread to people through an animal, and probably started spreading among humans no more than a month or two before it was noticed in December of 2019.<br /> The report says a scenario where it spread via an intermediate animal host, possibly a wild animal captured and then raised on a farm, is \"very likely.<br />\"
April 17, 2021 - The global tally of deaths from Covid-19 surpasses 3 million, according to data compiled by Johns Hopkins.<br />
August 3, 2021 - According to figures published by the CDC, the more contagious Delta variant accounts for an estimated 93.<br />4% of coronavirus circulating in the US during the last two weeks of July.<br /> The figures show a rapid increase over the past two months, up from around 3% in the two weeks ending May 22.<br />
August 12, 2021 - The FDA authorizes an additional Covid-19 vaccine dose for certain immunocompromised people.<br />
August 23, 2021 - The US FDA grants full approval to the Pfizer/BioNTech Covid-19 vaccine for people age 16 and older, making it the first coronavirus vaccine approved by the FDA.<br />
September 24, 2021 - US CDC Director Dr.<br /> Rochelle Walensky diverges from the agency\'s independent vaccine advisers to recommend boosters for a broader group of people -- those ages 18 to 64 who are at increased risk of Covid-19 because of their workplaces or institutional settings -- in addition to older adults, long-term care facility residents and some people with underlying health conditions.<br />
November 2, 2021 - Walensky says she is endorsing a recommendation to vaccinate children ages 5-11 against Covid-19, clearing the way for immediate vaccination of the youngest age group yet in the US.<br />
November 19, 2021 - The FDA authorizes boosters of the Pfizer/BioNTech and Moderna Covid-19 vaccines for all adults.<br /> The same day, the CDC also endorses boosters for all adults.<br />
December 16, 2021 - The CDC changes its recommendations for Covid-19 vaccines to make clear that shots made by Moderna and Pfizer/BioNTech are preferred over Johnson & Johnson\'s vaccine.<br />
December 22, 2021 - The FDA authorizes Pfizer\'s antiviral pill, Paxlovid, to treat Covid-19, the first antiviral Covid-19 pill authorized in the US for ill people to take at home, before they get sick enough to be hospitalized.<br /> The following day, the FDA authorizes Merck\'s antiviral pill, molnupiravir.<br />
December 27, 2021 - The CDC shortens the recommended times that people should isolate when they\'ve tested positive for Covid-19 from 10 days to five days if they don\'t have symptoms -- and if they wear a mask around others for at least five more days.<br /> The CDC also shortens the recommended time for people to quarantine if they are exposed to the virus to a similar five days if they are vaccinated.<br />"
dates <- global_timeline |> str_extract_all(pattern = "\\w{3,9}\\s[:digit:]{1,2},\\s[:digit:]{4}(?=\\s-\\s)") |> unlist()
length(dates)
events <- c()
for (i in 1:length(dates)){
pattern <- paste0("(?<=",dates[i],"\\s-\\s).+(?=<br />)")
events <- c(events, str_extract(global_timeline, pattern))
rm(pattern)
}
length(events)
global_event_timeline <- data.frame("date"=mdy(dates), "events"=events)
readr::write_csv(global_event_timeline, "global_covid_event_timeline.csv")
rm(global_timeline,dates,events)
total_cases_worldwide <-
total_cases_continents |>
set_group(date) |>
condense(total_cases = sum(total_cases),
total_deaths = sum(total_deaths))
# ggplot
# total_cases_worldwide |>
#   ggplot() +
#   geom_line(aes(x = date, y = total_cases)) +
#   geom_line(aes(x = date, y = total_deaths)) +
#   scale_y_log10() +
#   ggtitle(label = "Accumulative Glabal COVID-19 Cases - Worldwide") +
#   mytheme
# plotly
global_event_timeline <- merge(global_event_timeline, total_cases_worldwide, on = "date")
total_cases_worldwide |>
ascend_rows(date) |>
filter_rows(total_cases != 0) |>
plotly::plot_ly(
name = "Total Cases",
type = "scatter",
x = ~ date,
y = ~ total_cases,
mode = "lines",
line = list(color=covid_cases_marker, width = 3)
) |>
plotly::add_trace(
name = "Total Deaths",
type = "scatter",
x = ~ date,
y = ~ total_deaths,
mode = "lines",
line = list(color = covid_deaths_marker, width = 3)
) |>
plotly::add_markers(
name = "Key Events",
x = global_event_timeline$date,
y = global_event_timeline$total_cases,
text = paste(global_event_timeline$date, "<br />", global_event_timeline$events),
hoverinfo = "text",
mode = "markers",
inherit = FALSE,
marker = list(color = "#0050ff", size = 10, opacity = 0.2)
) |> plotly::layout(
title = list(
font = list(size = 20),
text = "Accumulative COVID-19 Cases and Key Events Worldwide",
y = 0.95),
showlegend = TRUE,
xaxis = list(
#gridcolor = "rgb(255,255,255)",
tickfont = list(color = slate_blue_marker),
linecolor = slate_blue_border,
mirror = TRUE,
linewidth = 6),
yaxis = list(
type = "log",
zeroline = TRUE,
zerolinecolor = slate_blue_zeroline,
tickfont = list(color = slate_blue_marker),
linecolor = slate_blue_border,
mirror = TRUE,
linewidth = 6),
margin = list(t = 60, b = 50, r = 0, l = 75)
)
# https://covid19.govt.nz/about-our-covid-19-response/history-of-the-covid-19-alert-system/#timeline-of-key-events
nz_timeline <- '28 February 2020
First COVID-19 case reported in New Zealand.
14 March 2020
The Government announces anyone entering New Zealand must self-isolate for 14 days, except those arriving from the Pacific.
19 March 2020
All indoor gatherings of more than 100 people are to be cancelled.
Borders close to all but New Zealand citizens and permanent residents.
21 March 2020
The Government introduces the 4-tiered Alert Level system to help combat COVID-19. The Prime Minister announces that New Zealand is at Alert Level 2.
23 March 2020
At 1:30pm the Prime Minister announces New Zealand has moved to Alert Level 3, effective immediately. In 48 hours, New Zealand will move to Alert Level 4.
25 March 2020
At 11:59pm, New Zealand moves to Alert Level 4, and the entire nation goes into self-isolation. A State of National Emergency is declared at 12:21pm.
29 March 2020
New Zealand reports its first COVID-19-related death.
31 March 2020
The State of National Emergency is extended at 9:27am. Further extensions are made at:
9:25am on 2 April 2020
12:21pm on 8 April 2020
12:21pm on 15 April 2020
12:21pm on 22 April 2020
12:21pm on 29 April 2020
12:21pm on 5 May 2020.
20 April 2020
The Prime Minister announces New Zealand will remain at Alert Level 4 for an additional 5 days. New Zealand will remain at Alert Level 3 for 2 weeks, before the status is reviewed.
27 April 2020
New Zealand moves to Alert Level 3 at 11:59pm.
4 May 2020
No new cases of COVID-19 are reported in New Zealand.
11 May 2020
The Prime Minister outlines the plan to move to Alert Level 2.
13 May 2020
New Zealand moves to Alert Level 2 at 11:59pm. The State of National Emergency expires at 12:21pm.
8 June 2020
The Ministry of Health reports that there are no more active cases of COVID-19 in New Zealand. At 11:59pm, New Zealand moves to Alert Level 1.
11 August 2020
4 new cases of COVID-19 are recorded in the community.
12 August 2020
At 12 noon, Auckland region moves to Alert Level 3. The rest of New Zealand moves to Alert Level 2.
14 August 2020
The Prime Minister announces that Auckland will remain at Alert Level 3 and the rest of New Zealand will remain at Alert Level 2 for 12 more days.
30 August 2020
Auckland moves to Alert Level 2 at 11:59pm, with extra restrictions on travel and gatherings. The rest of New Zealand remains at Alert Level 2.
21 September 2020
All regions except Auckland move to Alert Level 1 at 11:59pm.
23 September 2020
Auckland moves to Alert Level 2 without extra restrictions on travel and gatherings at 11:59pm.
7 October 2020
Auckland moves to Alert Level 1 at 11:59pm. All of New Zealand is now at Alert Level 1.
14 February 2021
3 new cases of COVID-19 are recorded in the community.
Auckland moves to Alert Level 3 at 11:59pm. The rest of New Zealand moves to Alert Level 2.
17 February 2021
Auckland moves to Alert Level 2 at 11:59pm. The rest of New Zealand moves to Alert Level 1.
22 February 2021
Auckland moves to Alert Level 1 at 11:59pm. All of New Zealand is now at Alert Level 1.
28 February 2021
Auckland moves to Alert Level 3 at 6am. The rest of New Zealand move to Alert Level 2.
7 March 2021
Auckland moves to Alert Level 2 at 6am. The rest of New Zealand moves to Alert Level 1.
12 March 2021
Auckland moves to Alert Level 1 at midday. All of New Zealand is now at Alert Level 1.
23 June 2021
Wellington moves to Alert Level 2 at 11:59pm. The rest of New Zealand remains at Alert Level 1.
29 June 2021
Wellington moves to Alert Level 1 at 11:59pm. All of New Zealand is now at Alert Level 1.
17 August 2021
All of New Zealand moves to Alert Level 4 at 11:59pm.
31 August 2021
All of New Zealand south of Auckland moves to Alert Level 3 at 11:59pm.
Auckland and Northland remain at Alert Level 4.
2 September 2021
Northland moves to Alert Level 3 at 11:59pm. All of New Zealand (except Auckland) is now at Alert Level 3.
Auckland remains at Alert Level 4.
7 September 2021
New Zealand (except Auckland) moves to Alert Level 2 at 11:59pm.
Auckland remains at Alert Level 4.
21 September 2021
Auckland and Upper Hauraki move to Alert Level 3 at 11:59pm.
The rest of New Zealand remains at Alert Level 2.
25 September 2021
Upper Hauraki moves to Alert Level 2 at 11:59pm.
Auckland remains at Alert Level 3. The rest of New Zealand remains at Alert Level 2.
3 October 2021
Raglan, Te Kauwhata, Huntly, Ngāruawāhia, Hamilton City and some surrounding areas move to Alert Level 3 for 5 days from 11:59pm.
Auckland remains at Alert Level 3. The rest of New Zealand remains at Alert Level 2.
5 October 2021
Alert Level 3 restrictions in Auckland are eased from 11:59pm.
Raglan, Te Kauwhata, Huntly, Ngāruawāhia, Hamilton City and some surrounding areas remain at Alert Level 3.
The rest of New Zealand remains at Alert Level 2.
7 October 2021
Waikato Alert Level 3 boundary is extended from 11:59pm to include Waitomo District, including Te Kuiti, Waipa District and Ōtorohanga District.
Auckland remains at Alert Level 3 with some restrictions eased.
The rest of New Zealand remains at Alert Level 2.
8 October 2021
Northland moves to Alert Level 3 at 11:59pm.
Auckland and parts of Waikato remain at Alert Level 3.
The rest of New Zealand remains at Alert Level 2.
19 October 2021
Northland moves to Alert Level 2 at 11:59pm.
Auckland and parts of Waikato remain at Alert Level 3.
The rest of New Zealand remains at Alert Level 2.
27 October 2021
The parts of Waikato at Alert Level 3 move to Step 1 of Alert Level 3.
Auckland remains at Step 1 of Alert Level 3.
The rest of New Zealand remains at Alert Level 2.
2 November 2021
Upper Northland moves to Alert Level 3.
The parts of Waikato at Alert Level 3 Step 1 move to Alert Level 3 Step 2 from 11:59pm.
Auckland remains at Step 1 of Alert Level 3.
The rest of New Zealand remains at Alert Level 2.
9 November 2021
Auckland moves to Alert Level 3 Step 2 at 11:59pm.
Upper Northland remains at Alert Level 3.
Parts of Waikato remain at Alert Level 3 Step 1.
The rest of New Zealand remains at Alert Level 2.
11 November 2021
Upper Northland moves to Alert Level 2.
Auckland and parts of Waikato remain at Alert Level 3 Step 2.
The rest of New Zealand remains at Alert Level 2.
16 November 2021
Parts of Waikato move to Alert Level 2.
Auckland remains at Alert Level 3 Step 2.
The rest of New Zealand remains at Alert Level 2.
2 December 2021
All of New Zealand moved to the COVID-19 Protection Framework, also known as the traffic lights.'
# extract event dates
dates <- nz_timeline |> str_extract_all(pattern = "(?<!\\son\\s)[:digit:]{1,2}\\s\\w{3,9}\\s[:digit:]{4}(?=\n)") |> unlist()
# extract events by date
nz_timeline <- nz_timeline |> str_remove_all(pattern = "\n") # remove line breaks
events <- c()
for (i in 1:length(dates)) {
if (i == length(dates)) {
pattern = paste0("(?<=", dates[i],").+")
} else {
pattern = paste0("(?<=",dates[i],").+","(?=",dates[i+1],")")
}
events <- c(events, str_extract(nz_timeline, pattern))
rm(pattern)
}
events <- lapply(events, str_trim) |> unlist() # trim spaces at start and end of string
events <- lapply(events, function(x){gsub("\\.",".<br />", x)}) |> unlist()
# check: num of events extracted == number of dates extracted
length(events) == length(dates)
# construct data.table for events
nz_event_timeline <- data.frame("date"=dmy(dates), "events"=events)
readr::write_csv(nz_event_timeline, "nz_covid_event_timeline.csv")
rm(nz_timeline, dates, events)
total_cases_nz <- raw |>
filter_rows(location == "New Zealand") |>
sel_cols(date, total_cases, total_deaths)
nz_event_timeline <- merge(nz_event_timeline, total_cases_nz, on = "date")
total_cases_nz |>
filter_rows(total_cases != 0) |>
plotly::plot_ly(
name = "Total Cases",
type = "scatter",
x = ~ date,
y = ~ total_cases,
mode = "lines",
line = list(color=covid_cases_marker, width = 3)
) |>
plotly::add_trace(
name = "Total Deaths",
type = "scatter",
x = ~ date,
y = ~ total_deaths,
mode = "lines",
line = list(color = covid_deaths_marker, width = 3)
) |>
plotly::add_markers(
name = "Events",
x = nz_event_timeline$date,
y = nz_event_timeline$total_cases,
text = paste(nz_event_timeline$date, "<br />", nz_event_timeline$events),
hoverinfo = "text",
mode = "markers",
inherit = FALSE,
marker = list(color = "#0050ff", size = 10, opacity = 0.2)
) |>
plotly::layout(
title = list(
font = list(size = 20),
text = "Accumulative COVID-19 Cases and Key Events In New Zealand",
y = 0.95),
showlegend = TRUE,
xaxis = list(
#gridcolor = "rgb(255,255,255)",
tickfont = list(color = slate_blue_marker),
linecolor = slate_blue_border,
mirror = TRUE,
linewidth = 6),
yaxis = list(
type = "log",
zeroline = TRUE,
zerolinecolor = slate_blue_border,
tickfont = list(color = slate_blue_marker),
linecolor = slate_blue_border,
mirror = TRUE,
linewidth = 6),
margin = list(t = 60, b = 50, r = 0, l = 75)
)
top_80 <-
raw |>
filter_rows(continent != "") |>
sel_cols(date, continent, location, total_cases, total_deaths, population_density)
top_80$total_deaths <- replace(top_80$total_deaths, is.na(top_80$total_deaths),0)
top_80$total_cases <- replace(top_80$total_cases, is.na(top_80$total_cases),0)
top_80 <-
top_80 |>
set_group(continent,location) |>
condense(total_cases = sum(total_cases),
total_deaths = sum(total_deaths),
population_density = mean(population_density)) |>
# filter_rows(!is.na(total_cases)) |>
descend_rows(total_cases)
top_80_count = 1
cumulative_total_cases = 0
total_cases_to_date = sum(top_80$total_cases)
while ((cumulative_total_cases/total_cases_to_date) <= 0.8) {
cumulative_total_cases <- sum(top_80$total_cases[1:top_80_count])
top_80_count <- top_80_count + 1
}
top_80 <- top_80[1:top_80_count,]
top_80 <-
top_80 |>
def_cols(death_rate_pct ~ round(total_deaths / total_cases, digits=3) * 100) |>
descend_rows(death_rate_pct)
knitr::kable(top_80, "simple")
# fix alternative country/location names in the top ten list
top_80$location <- gsub("United Kingdom", "UK", top_80$location)
top_80$location <- gsub("United States", "USA", top_80$location)
# obtain lat/long data for top ten countries/locations
top_80_map_data <-
data.table::data.table(map_data("world")) |>
sel_cols(lat, long, region) |>
filter_rows(!(long < -130 & region == "USA")) |>
filter_rows(region %in% top_80$location) |>
set_group(region) |>
condense(x=mean(long), y=mean(lat)) |>
rn_cols(region = location)
# merge lat/long locations with data for total_cases
top_80_map <- merge(top_80, top_80_map_data, on = location)
# create map using ggplot
map <- map_data("world") |>
ggplot(aes(x=long, y=lat, group=group)) +
geom_polygon(colour = "grey20", fill = "rosybrown2", size = 0.1) +
mytheme +
theme(axis.ticks = element_blank(),
axis.text = element_blank(),
axis.title = element_blank(),
panel.grid = element_blank(),
panel.background = element_rect(fill="lightblue4")) +
ggtitle("80% of Total COVID-19 Cases")
# create plotly interactive map with bubbles showing top 10 counrties/locations
plotly::ggplotly(map) |>
plotly::add_trace(name = "Cases",
mode = "markers",
x = top_80_map$x - top_80_map$total_cases/2e9,
y = top_80_map$y,
marker=list(size = top_80_map$total_cases/max(top_80_map$total_cases)*200, color = covid_cases_marker),
text = paste(top_80_map$location,"<br />total cases: ", top_80_map$total_cases)) |>
plotly::add_trace(name = "Deaths",
mode = "markers",
x = top_80_map$x - top_80_map$total_cases/2e9,
y = top_80_map$y,
marker=list(size = top_80_map$total_deaths/max(top_80_map$total_cases)*1600, color = covid_deaths_marker),
text = paste(top_80_map$location,
"<br />total deaths: ",
top_80_map$total_deaths,
"<br />death rate",
round(top_80_map$total_deaths/top_80_map$total_cases, digits=3) * 100,
"%")) |>
plotly::layout(
title = list(
font = list(size = 20),
text = "Accumulative COVID-19 Cases and Deaths Worldwide",
y = 0.95),
showlegend = FALSE,
showgrid = FALSE,
xaxis = list(
tickfont = list(color = "grey20"),
linecolor = "grey20",
mirror = TRUE,
linewidth = 6),
yaxis = list(
tickfont = list(color = "grey20"),
linecolor = "grey20",
mirror = TRUE,
linewidth = 6)
)
temp <-
top_80 |>
def_cols(location ~ as.factor(location),
total_cases_per_population_density ~ total_cases/population_density,
total_deaths_per_population_density ~ total_deaths/population_density) |>
def_cols(total_cases ~ total_cases/max(total_cases),
total_deaths ~ total_deaths/max(total_cases),
total_cases_per_population_density ~ total_cases_per_population_density / max(total_cases_per_population_density),
total_deaths_per_population_density ~ total_deaths_per_population_density / max(total_cases_per_population_density))
top_80_cases <- data.table::melt(temp,
id.vars= c("location", "continent"),
measure.vars = c("total_cases",
"total_deaths",
"total_cases_per_population_density",
"total_deaths_per_population_density"))
top_80_cases |>
filter_rows(variable != "total_deaths" & variable != "total_deaths_per_population_density") |>
ggplot() +
geom_bar(aes(x=forcats::fct_reorder(location, value), y = -value, fill=variable, width = 0.5),stat="identity", position=position_dodge2()) +
mytheme +
scale_fill_brewer(palette="Set1") +
coord_polar()
top_80_cases |>
filter_rows(variable != "total_cases" & variable != "total_cases_per_population_density") |>
ggplot() +
geom_bar(aes(x=forcats::fct_reorder(location, value), y = -value, fill=variable, width = 0.5),stat="identity", position=position_dodge2()) +
mytheme +
scale_fill_brewer(palette="Set1") +
coord_polar()
total_new_cases_worldwide <-
data.table::copy(raw)[,new_cases:=replace(new_cases, is.na(new_cases), 0)]
total_new_cases_worldwide <- total_new_cases_worldwide |> sel_cols(date, continent, new_cases) |> set_group(date, continent) |> condense(new_cases = sum(new_cases))
global_event_timeline <- merge(global_event_timeline, total_new_cases_worldwide, on = "date")
total_new_cases_worldwide |>
ascend_rows(date) |>
filter_rows(new_cases != 0) |>
set_group(date) |>
condense(new_cases = sum(new_cases)) |>
ggplot() + geom_line(aes(date, new_cases), colour = covid_cases_marker_hex) + mytheme +
ggtitle(label = "New Covid Cases Worldwide")
total_new_cases_worldwide |>
ascend_rows(date) |>
filter_rows(new_cases !=0 & continent != "") |>
ggplot() + geom_line(aes(date, new_cases), colour = covid_cases_marker_hex) + mytheme +
ggtitle(label = "New Covid Cases by Continents") +
facet_wrap(~ continent, nrow = 2)
total_new_cases_worldwide |>
ascend_rows(date) |>
filter_rows(new_cases !=0 & continent != "") |>
ggplot() + geom_line(aes(date, new_cases), colour = covid_cases_marker_hex) + mytheme +
ggtitle(label = "New Covid Cases by Continents") +
mytheme
total_new_cases_worldwide |>
ascend_rows(date) |>
filter_rows(new_cases !=0 & continent != "") |>
ggplot() + geom_line(aes(date, new_cases), colour = covid_cases_marker_hex) + mytheme +
ggtitle(label = "New Covid Cases by Continents") +
mytheme +
facet_wrap(~ continent, nrow = 2)
